<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Spec Prod Documentation</title>
		<script
			src="https://www.w3.org/Tools/respec/respec-w3c"
			class="remove"
			defer
		></script>
		<script class="remove">
			var respecConfig = {
				specStatus: "base",
				editors: [
					{ name: "Sid Vishnoi", url: "https://github.com/sidvishnoi" },
				],
				github: {
					repoURL: "https://github.com/w3c/spec-prod",
					branch: "main",
				},
				license: "cc0",
				tocIntroductory: true,
				postProcess: [fixLinks, fixAbbr, prettify],
			};

			function fixLinks() {
				document.querySelectorAll("section a").forEach(
					/** @param {HTMLAnchorElement} a */ a => {
						if (a.host === location.host && a.pathname.includes("options.md")) {
							a.pathname = "/";
						}
					},
				);
			}

			function fixAbbr() {
				document.querySelectorAll("abbr").forEach(abbr => {
					if (["W3C"].includes(abbr.textContent.trim())) {
						abbr.insertAdjacentText("beforebegin", abbr.textContent);
						abbr.remove();
					}
				});
			}

			function prettify() {
				document
					.querySelectorAll("table")
					.forEach(table => table.classList.add("def"));
				document
					.querySelectorAll("pre")
					.forEach(pre => pre.classList.add("example"));
			}
		</script>
	</head>
	<body>
		<p class="copyright remove"></p>
		<section id="abstract">
			<p>The w3c/spec-prod GitHub Action lets you:</p>
			<ul>
				<li>
					Build <a href="https://github.com/w3c/respec">ReSpec</a> and
					<a href="https://github.com/tabatkins/bikeshed">Bikeshed</a>
					specs.
				</li>
				<li>
					Validate generated document's markup and check for broken hyperlinks.
				</li>
				<li>
					Publish generated spec to GitHub Pages and/or w3.org (using Echidna).
				</li>
			</ul>
		</section>
		<section>
			<h2>Getting started</h2>
			<p>To get started, do the following:</p>
			<ol>
				<li>
					<a href="https://www.w3.org/Web/publications/register"
						>Request an Echidna token</a
					>
					for your spec (W3C Team Members and Chairs only!).
				</li>
				<li>
					Save the token as a "Secret" in the spec's repository's settings.
				</li>
				<li>
					<p>
						Create a ".github/workflows/action.yml" file at the root of the
						spec's repository.
					</p>
					<p>If you are using VS Code:</p>
					<pre class="bash">
						code .github/workflows/action.yml
					</pre
					>
				</li>
				<li>
					In to the "action.yml", copy, paste, and modify an one of the
					[[[#examples]]] below that suits your needs. Most typical one:
					<pre>
						# Inside .github/workflows/action.yml
						name: Node CI

						on:
						  push:
							branches:
							  - main
						  pull_request: {}

						jobs:
						  validate-and-publish:
							name: Validate and Publish to TR
							runs-on: ubuntu-latest # only linux supported at present
							steps:
							  - uses: actions/checkout@v2
							  - uses: w3c/spec-prod@v2
								with:
								  TOOLCHAIN: respec # or bikeshed
								  W3C_ECHIDNA_TOKEN: ${{ secrets.ECHIDNA_TOKEN }}
								  W3C_WG_DECISION_URL: " SEE BELOW FOR URLS! "
								  # Consider enabling link validation!
								  # VALIDATE_LINKS: true
								  # Convert Editor's Draft to Working Draft!
								  W3C_BUILD_OVERRIDE: |
									specStatus: WD

					</pre
					>
				</li>
				<li>
					For the `W3C_WG_DECISION_URL` URLS, please see [[[#w3c_wg_decision_url]]].
				</li>
			</ol>
		</section>
		<section
			id="examples"
			data-include="examples.md"
			data-include-format="markdown"
		></section>
		<section data-include="options.md" data-include-format="markdown"></section>
	</body>
</html>
